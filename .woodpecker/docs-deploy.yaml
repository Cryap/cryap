when:
  event: push
  path:
    include: ["docs/**", "mkdocs.yml"]
  branch: main
steps:
  build:
    image: squidfunk/mkdocs-material
    commands:
      - mkdocs build --site-dir build
  push:
    image: appleboy/drone-git-push
    settings:
      remote_name: origin
      branch: main
      path: build
      commit: true
      remote: git@codeberg.org:cryap/pages.git
      commit_message: deploy from main
      author_name: Deploy
      force: true
      ssh_key:
        from_secret: pages_ssh_key
runs_on: [success, failure]
